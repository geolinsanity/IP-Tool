<div class="main-wrapper">
	@if(userRole === 1) {
		<div class="spacer"></div>
	} @else {
		<div class="filter-row">
			<mat-form-field>
				<mat-label>Filter by IP</mat-label>
				<mat-select [(value)]="selectedRecordID" (selectionChange)="applyRecordIDFilter()">
					<mat-option [value]="null">All</mat-option>
					@for(record of recordIDOptions; track record) {
						<mat-option	mat-option [value]="record.recordID">{{ record.label || record.ip || record.recordID }}</mat-option>
					}
				</mat-select>
			</mat-form-field>
			<mat-form-field>
				<mat-label>Filter by User</mat-label>
				<mat-select [(value)]="selectedUserID" (selectionChange)="applyUserFilter()">
					<mat-option [value]="null">All</mat-option>
					@for(user of userOptions; track user.userID) {
						<mat-option	mat-option [value]="user.userID">{{ user.username }}</mat-option>
					}
				</mat-select>
			</mat-form-field>
		</div>
	}
	<div class="table-wrapper">
		<table mat-table [dataSource]="dataSource">
			<!-- <ng-container matColumnDef="#">
				<th mat-header-cell *matHeaderCellDef>#</th>
				<td mat-cell *matCellDef="let element; let i = index">{{i + 1}}</td>
			</ng-container> -->
			<ng-container matColumnDef="username">
				<th mat-header-cell *matHeaderCellDef>Username</th>
				<td mat-cell *matCellDef="let element" class="ip">{{element.username}}</td>
			</ng-container>
			<ng-container matColumnDef="sessionID">
				<th mat-header-cell *matHeaderCellDef>Session ID</th>
				<td mat-cell *matCellDef="let element"  class="ip">{{element.sessionID}}</td>
			</ng-container>
			<ng-container matColumnDef="actionType">
				<th mat-header-cell *matHeaderCellDef>Action Type</th>
				<td mat-cell *matCellDef="let element">{{element.actionType}}</td>
			</ng-container>
            <ng-container matColumnDef="actionDesc">
				<th mat-header-cell *matHeaderCellDef>Description</th>
				<td mat-cell *matCellDef="let element" class="comment">{{element.actionDesc}}</td>
			</ng-container>
			<ng-container matColumnDef="createdAt">
				<th mat-header-cell *matHeaderCellDef>Created</th>
				<td mat-cell *matCellDef="let element">{{element.createdAt}}</td>
			</ng-container>
			<ng-container matColumnDef="updatedAt">
				<th mat-header-cell *matHeaderCellDef>Updated</th>
				<td mat-cell *matCellDef="let element">{{element.updatedAt}}</td>
			</ng-container>
			<tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
		</table>
	</div>
	<mat-paginator
    [length]="totalRecords"
    [pageSize]="pageSize"
    [pageSizeOptions]="[10, 20, 30]"
    showFirstLastButtons
    (page)="onPageChange($event)">
  </mat-paginator>
</div>
